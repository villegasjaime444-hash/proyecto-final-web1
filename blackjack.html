<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Blackjack en Vivo</title>

<style>
    body {
        background: #0b0b0b;
        color: white;
        text-align: center;
        font-family: Arial;
    }

    .mesa {
        max-width: 900px;
        margin: auto;
        background: #0b3d2e;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 0 20px black;
    }

    .cartas {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 20px;
        min-height: 160px;
    }

    /* ======== CARTAS HTML ======== */
    .carta {
        width: 100px;
        height: 140px;
        background: white;
        border-radius: 10px;
        border: 2px solid #ddd;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 10px;
        font-size: 28px;
        font-weight: bold;
        position: relative;
        color: black;

        transition: transform 0.4s ease, opacity 0.4s;
        transform: translateY(-20px);
        opacity: 0;
    }

    .carta.mostrada {
        transform: translateY(0);
        opacity: 1;
    }

    .carta .sup {
        font-size: 20px;
        position: absolute;
        top: 5px;
        left: 8px;
    }

    .carta .inf {
        font-size: 20px;
        position: absolute;
        bottom: 5px;
        right: 8px;
        transform: rotate(180deg);
    }

    .roja {
        color: red;
    }

    /* Botones */
    .botones button {
        background: #c17f41;
        border: none;
        font-size: 18px;
        color: white;
        padding: 12px 25px;
        margin: 10px;
        border-radius: 10px;
        cursor: pointer;
        transition: 0.2s;
    }

    .botones button:hover {
        background: #e5a86f;
    }
</style>
</head>

<body>

<header>
    <div class="logo">Casino Royal</div>
</header>

<main style="padding:40px;">
    <h1>Blackjack Profesional</h1>
    <p id="estado">Repartiendo cartas...</p>

    <div class="mesa">

        <h2>Dealer</h2>
        <div id="cartasDealer" class="cartas"></div>
        <p>Puntos del dealer: <span id="puntosDealer">0</span></p>

        <hr>

        <h2>Jugador</h2>
        <div id="cartasJugador" class="cartas"></div>
        <p>Tus puntos: <span id="puntosJugador">0</span></p>

        <div class="botones">
            <button onclick="pedirCarta()">Pedir Carta</button>
            <button onclick="plantarse()">Plantarse</button>
            <button onclick="doblar()">Doblar</button>
            <button onclick="nueva()">Nueva Partida</button>
        </div>

    </div>
 <a href="Index.html" style="color:#c17f41; font-size:18px;">⬅ Volver al Casino</a>
</main>

<script>
/* ========= BARAJA ========= */
let palos = ["C", "D", "H", "S"];
let numeros = ["A",2,3,4,5,6,7,8,9,10,"J","Q","K"];
let mazo = [];

let manoJugador = [];
let manoDealer = [];

function crearMazo() {
    mazo = [];
    for (let p of palos) {
        for (let n of numeros) {
            mazo.push(n + "-" + p);
        }
    }
    mazo = mazo.sort(() => Math.random() - 0.5);
}

/* ========= VALORES ========= */
function valorCarta(carta) {
    let valor = carta.split("-")[0];
    if (valor === "A") return 11;
    if (["K","Q","J"].includes(valor)) return 10;
    return parseInt(valor);
}

function calcularPuntos(mano) {
    let total = 0;
    let ases = 0;

    for (let carta of mano) {
        total += valorCarta(carta);
        if (carta.startsWith("A")) ases++;
    }
    while (total > 21 && ases > 0) {
        total -= 10;
        ases--;
    }
    return total;
}

/* ========= CREAR CARTA HTML ========= */
function cartaHTML(carta) {
    let [valor, palo] = carta.split("-");
    let simbolo = palo === "C" ? "♣" :
                  palo === "D" ? "♦" :
                  palo === "H" ? "♥" : "♠";

    let div = document.createElement("div");
    div.classList.add("carta");

    if (palo === "H" || palo === "D") div.classList.add("roja");

    div.innerHTML = `
        <div class="sup">${valor}<br>${simbolo}</div>
        <div style="font-size:40px;">${simbolo}</div>
        <div class="inf">${valor}<br>${simbolo}</div>
    `;
    return div;
}

function mostrarCarta(carta, destino) {
    let c = cartaHTML(carta);
    document.getElementById(destino).appendChild(c);
    setTimeout(() => c.classList.add("mostrada"), 50);
}

/* ========= REPARTIR ========= */
function repartir() {
    crearMazo();
    manoJugador = [];
    manoDealer = [];

    document.getElementById("cartasJugador").innerHTML = "";
    document.getElementById("cartasDealer").innerHTML = "";

    manoJugador.push(mazo.pop());
    manoDealer.push(mazo.pop());
    manoJugador.push(mazo.pop());
    manoDealer.push(mazo.pop());

    mostrarCarta(manoJugador[0], "cartasJugador");
    mostrarCarta(manoDealer[0], "cartasDealer");

    setTimeout(() => mostrarCarta(manoJugador[1], "cartasJugador"), 300);
    setTimeout(() => mostrarCarta(manoDealer[1], "cartasDealer"), 600);

    setTimeout(() => {
        actualizarPuntos();
        document.getElementById("estado").innerText = "Tu turno...";
    }, 900);
}

function actualizarPuntos() {
    document.getElementById("puntosJugador").innerText = calcularPuntos(manoJugador);
    document.getElementById("puntosDealer").innerText = calcularPuntos(manoDealer);
}

/* ========= ACCIONES ========= */
function pedirCarta() {
    let carta = mazo.pop();
    manoJugador.push(carta);
    mostrarCarta(carta, "cartasJugador");
    actualizarPuntos();

    if (calcularPuntos(manoJugador) > 21) {
        document.getElementById("estado").innerText = "Te pasaste. Pierdes.";
    }
}

function doblar() {
    pedirCarta();
    plantarse();
}

function plantarse() {
    document.getElementById("estado").innerText = "Turno del dealer...";

    let interval = setInterval(() => {
        let puntos = calcularPuntos(manoDealer);
        if (puntos < 17) {
            let carta = mazo.pop();
            manoDealer.push(carta);
            mostrarCarta(carta, "cartasDealer");
            actualizarPuntos();
        } else {
            clearInterval(interval);
            decidirGanador();
        }
    }, 800);
}

/* ========= GANADOR ========= */
function decidirGanador() {
    let jugador = calcularPuntos(manoJugador);
    let dealer = calcularPuntos(manoDealer);

    if (dealer > 21) document.getElementById("estado").innerText = "¡El dealer se pasó, ganas!";
    else if (jugador > dealer) document.getElementById("estado").innerText = "¡Ganaste!";
    else if (jugador < dealer) document.getElementById("estado").innerText = "Perdiste.";
    else document.getElementById("estado").innerText = "Empate.";
}

function nueva() {
    document.getElementById("estado").innerText = "Repartiendo cartas...";
    repartir();
}

/* ========= INICIO ========= */
window.onload = repartir;

</script>

</body>
</html>



